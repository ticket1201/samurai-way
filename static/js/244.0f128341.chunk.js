"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[244],{4244:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var n=s(5671),i=s(3144),o=s(136),a=s(2882),r=s(2791),l="Profile_main__UrkZJ",c=s(885),u=s(9765),p="ProfileInfo_profileInfo__l-t83",d="ProfileInfo_profileMain__um5HO",h="ProfileInfo_imgWrapper__idokZ",f="ProfileInfo_lookingForJob__fouO+",m="ProfileInfo_image__JQyfD",j="ProfileInfo_profileMainDescription__E1h8O",x="ProfileInfo_profileMainDescriptionPlug__uoSYq",v="ProfileInfo_blink__cViVH",_=s(184),g=function(){return(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"Landscape"}),(0,_.jsxs)("div",{className:"".concat(d," ").concat(v),children:[(0,_.jsx)("div",{className:m}),(0,_.jsxs)("div",{className:x,children:[(0,_.jsx)("div",{}),(0,_.jsx)("div",{})]})]})]})},b=function(t){(0,o.Z)(s,t);var e=(0,a.Z)(s);function s(){var t;(0,n.Z)(this,s);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).state={editMode:!1,statusText:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.statusText)},t.updateStatusHandler=function(e){t.setState({statusText:e.currentTarget.value})},t}return(0,i.Z)(s,[{key:"componentDidUpdate",value:function(t,e){t.status!==this.props.status&&this.setState({statusText:this.props.status})}},{key:"render",value:function(){return(0,_.jsx)(_.Fragment,{children:this.state.editMode?(0,_.jsx)("div",{children:(0,_.jsx)("input",{type:"text",value:this.state.statusText,onBlur:this.deactivateEditMode,onChange:this.updateStatusHandler,autoFocus:!0})}):(0,_.jsx)("div",{children:(0,_.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"nothing"})})})}}]),s}(r.Component),k=b,P=s(5987),y={contacts:"Contacts_contacts__L7RPG",contactsLinks:"Contacts_contactsLinks__bjsCJ"},N=s(6139),S=s(704),M=["handleSubmit","error"],Z=(0,S.Z)({form:"contacts"})((function(t){var e=t.handleSubmit,s=t.error,n=(0,P.Z)(t,M),i=n.initialValues.contacts&&Object.keys(n.initialValues.contacts).map((function(t){return(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:[(0,_.jsx)(N.Z,{type:"input",component:"input",name:"contacts."+t},t),t]})},t)}));return(0,_.jsx)("div",{className:y.contactsLinks,children:(0,_.jsxs)("form",{onSubmit:e,children:[(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:["fullName",(0,_.jsx)(N.Z,{type:"input",component:"input",name:"fullName"},"fullName")]})}),(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:["aboutMe",(0,_.jsx)(N.Z,{type:"input",component:"input",name:"aboutMe"},"aboutMe")]})}),(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:["lookingForAJob",(0,_.jsx)(N.Z,{type:"checkbox",component:"input",name:"lookingForAJob"},"lookingForAJob")]})}),(0,_.jsx)("div",{children:(0,_.jsxs)("label",{children:["lookingForAJobDescription",(0,_.jsx)(N.Z,{type:"input",component:"input",name:"lookingForAJobDescription"},"lookingForAJobDescription")]})}),(0,_.jsxs)("div",{children:["Contacts:",i]}),(0,_.jsx)("button",{children:"Save"}),s&&(0,_.jsx)("p",{className:y.error,children:s})]})})})),C=function(t){var e=t.profile,s=t.status,n=t.updateStatus,i=t.isOwner,o=t.savePhoto,a=t.saveProfile,l=(0,r.useState)(!1),x=(0,c.Z)(l,2),v=x[0],b=x[1],P=(0,r.useRef)(null);if(!e)return(0,_.jsx)(g,{});var y=null!==e&&void 0!==e&&e.lookingForAJob?f:"";return(0,_.jsxs)("div",{className:p,children:[(0,_.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"Landscape"}),(0,_.jsxs)("div",{className:d,children:[(0,_.jsxs)("div",{className:h,children:[(0,_.jsx)("img",{className:"".concat(y," ").concat(m),src:e.photos.small||u,alt:"Avatar"}),i&&(0,_.jsx)("button",{onClick:function(){return P&&P.current&&P.current.click()},children:"+"}),i&&(0,_.jsx)("input",{type:"file",ref:P,onChange:function(t){t.target.files&&t.target.files.length&&o(t.target.files[0])}})]}),(0,_.jsx)("div",{className:j,children:v?(0,_.jsx)(Z,{initialValues:e,onSubmit:function(t){a(t).then((function(){b(!1)}))}}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("h2",{children:e.fullName}),(0,_.jsxs)("p",{children:["Looking for a job: ",e.lookingForAJob||"no"]}),(0,_.jsx)("p",{children:e.aboutMe}),(null===e||void 0===e?void 0:e.lookingForAJob)&&(0,_.jsxs)("p",{children:["\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 \u043a\u0430\u043a: ",null===e||void 0===e?void 0:e.lookingForAJobDescription]}),(0,_.jsx)(k,{status:s,updateStatus:n}),i&&(0,_.jsx)("button",{onClick:function(){return b(!0)},children:"edit"})]})})]})]})},J=s(81),w="MyPosts_posts__mTzCh",F="MyPosts_postsItemsWrapper__rK-t4",I="MyPosts_addPostWrapper__057fB",A="MyPosts_addPost__LQ8Ms",D={item:"Post_item__nLf7j",title:"Post_title__VZU73",nameTimeWrapper:"Post_nameTimeWrapper__8a+vU",name:"Post_name__Chsej",message:"Post_message__WqRSK",likes:"Post_likes__FUk7C"},U=function(t){var e=t.name,s=t.time,n=t.message,i=t.likeCount;return(0,_.jsxs)("div",{className:D.item,children:[(0,_.jsxs)("div",{className:D.title,children:[(0,_.jsx)("img",{src:"https://html5css.ru/howto/img_avatar.png",alt:"Profile"}),(0,_.jsxs)("div",{className:D.nameTimeWrapper,children:[(0,_.jsx)("p",{className:D.name,children:e}),(0,_.jsx)("p",{className:D.time,children:s})]})]}),(0,_.jsx)("div",{className:D.message,children:(0,_.jsx)("p",{children:n})}),(0,_.jsx)("div",{className:D.likes,children:(0,_.jsxs)("span",{children:["Likes: ",i]})})]})},T=s(3079),L=s(8260),O=(0,T.D)(30),E=(0,S.Z)({form:"postAddMessage"})((function(t){var e=t.handleSubmit;return(0,_.jsxs)("form",{className:A,onSubmit:e,children:[(0,_.jsx)(N.Z,{component:L.K,name:"newPostText",placeholder:"Enter your post text",validate:[T.C,O]}),(0,_.jsx)("button",{children:"Submit"})]})})),R=function(t){(0,o.Z)(s,t);var e=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),e.apply(this,arguments)}return(0,i.Z)(s,[{key:"render",value:function(){var t=this,e=this.props.posts.map((function(t){return(0,_.jsx)(U,{name:t.name,time:t.time,message:t.message,likeCount:t.likeCount},t.id)}));return(0,_.jsxs)("div",{className:w,children:[(0,_.jsxs)("div",{className:I,children:[(0,_.jsx)("h3",{children:"My posts"}),(0,_.jsx)(E,{onSubmit:function(e){var s=e.newPostText;t.props.addPost(s)}})]}),(0,_.jsx)("div",{className:F,children:e})]})}}]),s}(r.PureComponent),W=s(364),q=(0,W.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(e){t((0,J.Mq)(e))}}}))(R),V=s(8683),K=function(t){var e=t.profile,s=Object.keys((0,V.Z)({},e.contacts)).map((function(t){return e.contacts[t]&&(0,_.jsxs)("div",{children:[(0,_.jsxs)("p",{children:[t,": ",(0,_.jsx)("a",{href:e.contacts[t],target:"_blank",rel:"noreferrer",children:t})]})," "]},t)}));return s.every((function(t){return null===t}))&&(s=[(0,_.jsx)("p",{children:"User has no contacts"},"1")]),(0,_.jsxs)("div",{className:y.contacts,children:[(0,_.jsx)("h3",{children:"Contacts"}),(0,_.jsx)("div",{className:y.contactsLinks,children:s})]})},H=function(t){var e=t.profile,s=t.status,n=t.updateStatus,i=t.isOwner,o=t.savePhoto,a=t.saveProfile;return(0,_.jsx)(_.Fragment,{children:0!==Object.keys(e).length&&(0,_.jsxs)("div",{className:l,children:[(0,_.jsx)(C,{isOwner:i,profile:e,status:s,updateStatus:n,savePhoto:o,saveProfile:a}),(0,_.jsx)(K,{profile:e}),(0,_.jsx)(q,{})]})})},Q=s(9271),z=s(7284),B=s(7781),$=function(t){(0,o.Z)(s,t);var e=(0,a.Z)(s);function s(){return(0,n.Z)(this,s),e.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var t,e=null!==(t=this.props.match.params.userId)&&void 0!==t?t:this.props.authorizedUserId;e||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,_.jsx)(H,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}}]),s}(r.Component),G=(0,B.qC)((0,W.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id}}),{getUserProfile:J.et,getStatus:J.lR,updateStatus:J.Nf,savePhoto:J.Ju,saveProfile:J.Ii}),Q.EN,z.D)($)}}]);
//# sourceMappingURL=244.0f128341.chunk.js.map