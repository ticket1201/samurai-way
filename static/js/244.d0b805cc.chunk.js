"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[244],{7284:function(t,s,e){e.d(s,{D:function(){return j}});var n=e(8683),i=e(5987),o=e(5671),r=e(3144),a=e(136),l=e(2882),c=e(2791),u=e(9271),p=e(364),d=e(184),h=["isAuth"],f=function(t){return{isAuth:t.auth.isAuth}};function j(t){var s=function(s){(0,a.Z)(c,s);var e=(0,l.Z)(c);function c(){return(0,o.Z)(this,c),e.apply(this,arguments)}return(0,r.Z)(c,[{key:"render",value:function(){var s=this.props,e=s.isAuth,o=(0,i.Z)(s,h);return e?(0,d.jsx)(t,(0,n.Z)({},o)):(0,d.jsx)(u.l_,{to:"/login"})}}]),c}(c.Component);return(0,p.$j)(f)(s)}},4244:function(t,s,e){e.r(s),e.d(s,{default:function(){return B}});var n=e(5671),i=e(3144),o=e(136),r=e(2882),a=e(2791),l="Profile_main__UrkZJ",c=e(885),u=e(9765),p="ProfileInfo_profileInfo__l-t83",d="ProfileInfo_profileMain__um5HO",h="ProfileInfo_lookingForJob__fouO+",f="ProfileInfo_image__JQyfD",j="ProfileInfo_profileMainDescription__E1h8O",m="ProfileInfo_profileMainDescriptionPlug__uoSYq",x="ProfileInfo_blink__cViVH",v=e(184),_=function(){return(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"Landscape"}),(0,v.jsxs)("div",{className:"".concat(d," ").concat(x),children:[(0,v.jsx)("div",{className:f}),(0,v.jsxs)("div",{className:m,children:[(0,v.jsx)("div",{}),(0,v.jsx)("div",{})]})]})]})},g=function(t){(0,o.Z)(e,t);var s=(0,r.Z)(e);function e(){var t;(0,n.Z)(this,e);for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(t=s.call.apply(s,[this].concat(o))).state={editMode:!1,statusText:t.props.status},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateStatus(t.state.statusText)},t.updateStatusHandler=function(s){t.setState({statusText:s.currentTarget.value})},t}return(0,i.Z)(e,[{key:"componentDidUpdate",value:function(t,s){t.status!==this.props.status&&this.setState({statusText:this.props.status})}},{key:"render",value:function(){return(0,v.jsx)(v.Fragment,{children:this.state.editMode?(0,v.jsx)("div",{children:(0,v.jsx)("input",{type:"text",value:this.state.statusText,onBlur:this.deactivateEditMode,onChange:this.updateStatusHandler,autoFocus:!0})}):(0,v.jsx)("div",{children:(0,v.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"nothing"})})})}}]),e}(a.Component),b=g,k=e(5987),P={contacts:"Contacts_contacts__L7RPG",contactsLinks:"Contacts_contactsLinks__bjsCJ"},y=e(6139),Z=e(704),S=["handleSubmit","error"],N=(0,Z.Z)({form:"contacts"})((function(t){var s=t.handleSubmit,e=t.error,n=(0,k.Z)(t,S),i=n.initialValues.contacts&&Object.keys(n.initialValues.contacts).map((function(t){return(0,v.jsx)("div",{children:(0,v.jsxs)("label",{children:[(0,v.jsx)(y.Z,{type:"input",component:"input",name:"contacts."+t},t),t]})},t)}));return(0,v.jsx)("div",{className:P.contactsLinks,children:(0,v.jsxs)("form",{onSubmit:s,children:[(0,v.jsx)("div",{children:(0,v.jsxs)("label",{children:["fullName",(0,v.jsx)(y.Z,{type:"input",component:"input",name:"fullName"},"fullName")]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{children:["aboutMe",(0,v.jsx)(y.Z,{type:"input",component:"input",name:"aboutMe"},"aboutMe")]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{children:["lookingForAJob",(0,v.jsx)(y.Z,{type:"checkbox",component:"input",name:"lookingForAJob"},"lookingForAJob")]})}),(0,v.jsx)("div",{children:(0,v.jsxs)("label",{children:["lookingForAJobDescription",(0,v.jsx)(y.Z,{type:"input",component:"input",name:"lookingForAJobDescription"},"lookingForAJobDescription")]})}),(0,v.jsxs)("div",{children:["Contacts:",i]}),(0,v.jsx)("button",{children:"Save"}),e&&(0,v.jsx)("p",{className:P.error,children:e})]})})})),M=function(t){var s=t.profile,e=t.status,n=t.updateStatus,i=t.isOwner,o=t.savePhoto,r=t.saveProfile,l=(0,a.useState)(!1),m=(0,c.Z)(l,2),x=m[0],g=m[1];if(!s)return(0,v.jsx)(_,{});var k=null!==s&&void 0!==s&&s.lookingForAJob?h:"";return(0,v.jsxs)("div",{className:p,children:[(0,v.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/7yQR5uJhwEkRfjwMFJ7bUK/dc52a0913e8ff8b5c276177890eb0129/offset_comp_772626-opt.jpg?fit=fill&w=800&h=300",alt:"Landscape"}),(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("img",{className:"".concat(k," ").concat(f),src:s.photos.small||u,alt:"Avatar"}),i&&(0,v.jsx)("input",{type:"file",onChange:function(t){t.target.files&&t.target.files.length&&o(t.target.files[0])}}),(0,v.jsx)("div",{className:j,children:x?(0,v.jsx)(N,{initialValues:s,onSubmit:function(t){r(t).then((function(){g(!1)}))}}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{children:s.fullName}),(0,v.jsxs)("p",{children:["Looking for a job: ",s.lookingForAJob||"no"]}),(0,v.jsx)("p",{children:s.aboutMe}),(null===s||void 0===s?void 0:s.lookingForAJob)&&(0,v.jsxs)("p",{children:["\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443 \u043a\u0430\u043a: ",null===s||void 0===s?void 0:s.lookingForAJobDescription]}),(0,v.jsx)(b,{status:e,updateStatus:n}),i&&(0,v.jsx)("button",{onClick:function(){return g(!0)},children:"edit"})]})})]})]})},C=e(81),J="MyPosts_posts__mTzCh",w="MyPosts_addPost__LQ8Ms",A="Post_item__nLf7j",F="Post_message__WqRSK",I="Post_likes__FUk7C",D=function(t){var s=t.message,e=t.likeCount;return(0,v.jsxs)("div",{className:A,children:[(0,v.jsx)("img",{src:"https://html5css.ru/howto/img_avatar.png",alt:"Profile"}),(0,v.jsx)("div",{className:F,children:(0,v.jsx)("p",{children:s})}),(0,v.jsx)("div",{className:I,children:(0,v.jsxs)("span",{children:["Likes: ",e]})})]})},L=e(3079),O=e(8260),U=(0,L.D)(30),E=(0,Z.Z)({form:"postAddMessage"})((function(t){var s=t.handleSubmit;return(0,v.jsxs)("form",{className:w,onSubmit:s,children:[(0,v.jsx)(y.Z,{component:O.K,name:"newPostText",placeholder:"Enter your post text",validate:[L.C,U]}),(0,v.jsx)("button",{children:"Submit"})]})})),T=function(t){(0,o.Z)(e,t);var s=(0,r.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"render",value:function(){var t=this,s=this.props.posts.map((function(t){return(0,v.jsx)(D,{message:t.message,likeCount:t.likeCount},t.id)}));return(0,v.jsxs)("div",{className:J,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)(E,{onSubmit:function(s){var e=s.newPostText;t.props.addPost(e)}}),(0,v.jsx)("div",{className:"posts",children:s})]})}}]),e}(a.PureComponent),R=e(364),q=(0,R.$j)((function(t){return{posts:t.profilePage.posts}}),(function(t){return{addPost:function(s){t((0,C.Wl)(s))}}}))(T),V=e(8683),H=function(t){var s=t.profile,e=Object.keys((0,V.Z)({},s.contacts)).map((function(t){return s.contacts[t]&&(0,v.jsxs)("div",{children:[(0,v.jsxs)("p",{children:[t,": ",(0,v.jsx)("a",{href:s.contacts[t],target:"_blank",rel:"noreferrer",children:t})]})," "]},t)}));return e.every((function(t){return null===t}))&&(e=[(0,v.jsx)("p",{children:"User has no contacts"})]),(0,v.jsxs)("div",{className:P.contacts,children:[(0,v.jsx)("h3",{children:"Contacts:"}),(0,v.jsx)("div",{className:P.contactsLinks,children:e})]})},K=function(t){var s=t.profile,e=t.status,n=t.updateStatus,i=t.isOwner,o=t.savePhoto,r=t.saveProfile;return(0,v.jsxs)("div",{className:l,children:[Object.keys(s).length&&(0,v.jsx)(M,{isOwner:i,profile:s,status:e,updateStatus:n,savePhoto:o,saveProfile:r}),Object.keys(s).length&&(0,v.jsx)(H,{profile:s}),(0,v.jsx)(q,{})]})},Q=e(9271),z=e(7284),$=e(7781),W=function(t){(0,o.Z)(e,t);var s=(0,r.Z)(e);function e(){return(0,n.Z)(this,e),s.apply(this,arguments)}return(0,i.Z)(e,[{key:"refreshProfile",value:function(){var t,s=null!==(t=this.props.match.params.userId)&&void 0!==t?t:this.props.authorizedUserId;s||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,s){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(K,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}}]),e}(a.Component),B=(0,$.qC)((0,R.$j)((function(t){return{profile:t.profilePage.profile,status:t.profilePage.status,authorizedUserId:t.auth.id}}),{getUserProfile:C.et,getStatus:C.lR,updateStatus:C.Nf,savePhoto:C.Ju,saveProfile:C.Ii}),Q.EN,z.D)(W)}}]);
//# sourceMappingURL=244.d0b805cc.chunk.js.map